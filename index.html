<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    </head>
<body>
    <nav class="navbar navbar-light bg-light">
        <span class="navbar-brand mb-0 h1 m-auto">Weather Dashboard</span>
      </nav>
 
      <div class="container">
          <div class="row">
            <div class="col-3">
                <input type="text" id="city" name="city" value=""><br>
                <input id ="button" type="button" value="Submit">col1
    
            </div>
            <div class="col-6">
                <div class="row">
                    <div class= "container" id= "mainWeather"></div>
              <div class="row">
                <div class= "forecast"></div>
              </div>
        </div>
          </div>

    <div class="container">
        
    </div>


     
      

        
    <!-- </div> -->
    <!-- <div class="container">
          <div class="col">
            <form>
                <input type="text" id="city" name="city" value=""><br>
                <input id ="button" type="button" value="Submit">
              </form>
          </div>
          <div class="col">
            <div class="row">
                <div class= "container" id= "mainWeather">
                </div>
                <div class="row">
                    <div class= "forecast"></div>
                </div>

            </div>
            
          </div> -->
      </div>
    


      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
      




    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> -->
    <script>
        var cityHistory = [];
        var lat = "";
        var lon = "";

        $("#button").click(function(){
            cityName = $("#city").val();
            cityHistory.push(cityName);
            localStorage.setItem("history",cityHistory);
            var queryURL = "http://api.openweathermap.org/data/2.5/weather?q="+ cityName +"&appid=7d8a57cfe0185102716711da0a05d909";
            $.ajax({
            url: queryURL,
            method: "GET"
        })
            .then(function(response){
                var results = response.data;
                console.log(response)
                console.log(response.main)
                console.log(response.main.temp);
                console.log(response.main.humidity);
                console.log(response.wind.speed);
                localStorage.setItem("citylat",response.coord.lat);
                localStorage.setItem("citylon",response.coord.lon);

                var citylon = response.coord.lot;
                //*** DISPLAY ON CARD
                var cardClass = $("<div>");
                cardClass.attr("class","card");
                var cardBody = $("<div>");
                cardBody.attr("class", "card-body");
                cardBody.append("<h1>"+response.name+"</h1>");
                cardBody.append("<p>"+ response.main.temp +"</p>");
                cardClass.append(cardBody);
                $("#mainWeather").append(cardClass)
                //***DISPLAY ON CARD

            }) 
            lat = localStorage.getItem("citylat");
            lon = localStorage.getItem("citylon");
            console.log(lat,lon)
            nextDays();
        })
        function nextDays(){
            var queryURL = "https://api.openweathermap.org/data/2.5/onecall?lat="+lat+"&lon="+lon+"&appid=7d8a57cfe0185102716711da0a05d909";
            $.ajax({
                url: queryURL,
                method: "GET"
            })
            .then(function(response){
                for (var i=1; i<6; i++){
                    var colClass = $("<div>");
                    colClass.attr("class","col-3");
                    var cardForecast = $("<div>");
                    cardForecast.attr("class","card");
                    var cardBodyForecast = $("<div>");
                    cardBodyForecast.attr("class", "card-body");
                    cardBodyForecast.append("<p>"+response.daily[i].temp.day+"</p>");
                    // cardBodyForecast.append("<p>"+ response.main.temp +"</p>");
                    cardForecast.append(cardBodyForecast);
                    colClass.append(cardForecast);
                    $(".forecast").append(colClass);
                }
                console.log(response)
               
            })
        }
//         <div class="card" style="width: 18rem;">
//   <div class="card-body">
//     <h5 class="card-title">Card title</h5>
//     <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
//     <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
//     <a href="#" class="card-link">Card link</a>
//     <a href="#" class="card-link">Another link</a>
//   </div>
// </div>
            
    </script>
    
</body>
</html>